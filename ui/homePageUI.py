# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'homePageUI.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.
import shutil

from PyQt5 import QtWidgets, uic
import os

from ui.HnrKingstonUI import Ui_HnrKingstonPage
from ui.loadFilesUI import Ui_loadFilesPage


class Ui_loadHomePage(QtWidgets.QMainWindow):
    def setupUi(self):
        uic.loadUi('homePageUI.ui', self)
        self.show()
        self.loadFilesButton.clicked.connect(self.openLoadFilesWindow)
        self.openHNRPageButton.clicked.connect(self.openHnrKingstonWindow)

    def openLoadFilesWindow(self):
        self.window = QtWidgets.QMainWindow()
        self.ui = Ui_loadFilesPage()
        self.ui.setupUi()
        self.ui.filesSelected.connect(self.displaySelectedFiles)

    def openHnrKingstonWindow(self):
        self.window = QtWidgets.QMainWindow()
        self.ui = Ui_HnrKingstonPage()
        self.ui.setupUi()

    def displaySelectedFiles(self, files):
        self.output_directory = "uploaded_files"  # Define the output directory

        # Create the output directory if it doesn't exist
        os.makedirs(self.output_directory, exist_ok=True)

        for file_path in files:
            # Define the output file path in the output directory
            output_file_path = os.path.join(self.output_directory, os.path.basename(file_path))

            # Copy the uploaded file to the output directory
            try:
                shutil.copy(file_path, output_file_path)
            except Exception as e:
                print(f"Error saving file: {e}")

        for file_path in files:
            self.listOfFiles.addItem(file_path)



if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    HomePage = QtWidgets.QMainWindow()
    ui = Ui_loadHomePage()
    ui.setupUi()
    sys.exit(app.exec_())
